name: Render Keepalive (KST 08-23)

on:
  schedule:
    # UTC 기준 23,0-13시는 KST 기준 08:00-22:59입니다.
    # 10분 간격 핑으로 23시 이전까지 서비스가 깨어있도록 유지합니다.
    - cron: "*/10 23,0-13 * * *"
  workflow_dispatch:

jobs:
  ping-render:
    runs-on: ubuntu-latest
    timeout-minutes: 2
    steps:
      - name: 시크릿 값 확인
        shell: bash
        run: |
          if [ -z "${{ secrets.RENDER_HEALTHCHECK_URL }}" ]; then
            echo "RENDER_HEALTHCHECK_URL 시크릿이 비어 있습니다."
            exit 1
          fi

      - name: Render 헬스체크 호출
        shell: bash
        run: |
          curl --fail --silent --show-error --max-time 15 \
            "${{ secrets.RENDER_HEALTHCHECK_URL }}"
